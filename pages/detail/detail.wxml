<import src="../../templates/copyright.wxml" />
<import src="../../templates/loading.wxml" />
<import src="../../templates/modal-view/modal-view.wxml" />
<import src="../../templates/login-popup.wxml" />



<view>
  <!-- å°ç¨‹åºå¹¿å‘Š -->
  <!-- <view class="ad-box" wx:if="{{detail.detailAdId !='' && detail.detailAd=='1' && detailTopAdsuccess}}">
        <ad unit-id="{{detail.detailAdId}}" ad-intervals="30" ad-type="video" binderror="adTopbinderror"></ad>
      </view> -->

  <!-- å¸–å­ -->
  <view class="detail-content" style="display:{{display}}">
    <!-- æ ‡é¢˜ åˆ é™¤ç»“å°¾çš„.rendered-->
    <view class="entry-title">{{detail.title}}</view>
    <!-- ä½œè€…ä¿¡æ¯ -->
    <view data-ainfo="{{authorInfo}}" bindtap="authorShow"  >
      <van-icon name="user-o" color="#168fff" /> <text> {{authorInfo.wxName}}</text>
    </view>

    <!-- å¸–å­äº’åŠ¨æ•°æ® -->
    <view class="entry-data">

      <image src="../../images/calendar.png"></image>
      <text>{{detailDate}}</text>
      <image src="../../images/comments.png"></image>
      <text>{{commentCount}}</text>
      <image src="../../images/pageviews.png"></image>
      <text>{{detail.pageviews}}</text>
      <image src="../../images/home-like.png"></image>
      <text>{{likeCount}}</text>
    </view>
    <!-- å¸–å­æ­£æ–‡ -->
    <view class="entry-summary" id="entry-summary" style="height:{{detailSummaryHeight}}">

      <mp-html content="{{ detail.content }}" bindlinktap="wxParseTagATap" copy-link="{{false}}" selectable="{{true}}" lazy-load="{{true}}" markdown="{{true}}" />
      <!-- é˜…è¯»æ›´å¤š -->
      <!-- <view class="detail-read-more" wx:if="{{detailSummaryHeight != ''}}">
          <view class="detail-readmore-mask">
            <view class="detail-readmore-btn" bindtap="readMore">è§‚çœ‹è§†é¢‘ï¼Œé˜…è¯»æ›´å¤š...</view>
          </view>
        </view> -->

    </view>




    <!-- æ·»åŠ 9å›¾æ¨¡å— -->
    <van-grid direction="horizontal" column-num="3" square="{{ true }}" clickable="{{ true }}">
      <van-grid-item use-slot wx:for="{{ imagesList }}" wx:key="id">
        <van-image lazy-load width="222rpx" height="222rpx" fit="cover" src="{{ item }}" data-src="{{item}}" bind:click="clickImage" />

      </van-grid-item>
    </van-grid>

    <view>

    </view>



    <!--  ä¸Šä¸‹æ–‡  -->
    <!-- <view wx:if="{{detail.previous_post_id || detail.next_post_id}}" class="up-down-post"> -->
    <!-- ä¸Šä¸€ç¯‡ -->
    <!-- <view wx:if="{{detail.previous_post_id}}" class="up-post">
        <navigator url="../detail/detail?id={{detail.previous_post_id}}" open-type="redirect" hover-class="relatedNavigator">ä¸Šä¸€ç¯‡ï¼š{{detail.previous_post_title}}</navigator>
      </view> -->
    <!-- ä¸‹ä¸€ç¯‡ -->
    <!-- <view wx:if="{{detail.next_post_id}}" class="down-post">
        <navigator url="../detail/detail?id={{detail.next_post_id}}" open-type="redirect" hover-class="relatedNavigator">{{detail.next_post_title}}ï¼šä¸‹ä¸€ç¯‡</navigator>
      </view> -->
    <!-- </view> -->

    <!-- å°ç¨‹åºå¹¿å‘Š -->
    <!-- <view class="ad-box-video" wx:if="{{detail.videoAdId !='' && detail.detailAd=='1' && detailAdsuccess}}">
      <ad unit-id="{{detail.videoAdId}}" ad-intervals="30" ad-type="video" binderror="adbinderror"></ad>
    </view> -->


    <!-- çŒœä½ å–œæ¬¢ -->
    <!-- <view wx:if="{{postList.length != 0}}" class="relatedPost" style="display:{{display}}">
      <view class="subTitle">çŒœä½ å–œæ¬¢</view>
      <view class="subTitle_line"></view>
      <block wx:key="id" wx:for="{{postList}}">
        <navigator url="../detail/detail?id={{item.id}}" open-type="redirect" hover-class="relatedNavigator">
          <view class="relatedText">{{index+1}}. {{item.title.rendered}}</view>
        </navigator>
      </block>
    </view> -->

    <!-- ç‚¹ä¸ªèµ -->
    <view class="likePost" style="display:{{displayLike}}">

      <view class="subTitle">é€ä¸ªå¿ƒï¼Ÿ</view>

      <view class="subTitle_line"></view>

      <view class="comment-btn">


        <view class="likeTitle">
          <text>å·²è·å¾—{{likeCount}}é¢—â¤ï¸ </text>
        </view>
        <!-- <view class="like-btn-icon">
        <image src="../../images/like-on.png" class="img-like" id="liketop" ></image>
      </view> -->

        <van-button round size="small" type="primary" bindtap="commentPage">è¯„è®ºæœ¬å¸–</van-button>

      </view>
      <view class="likeText">
        <block wx:key="id" wx:for="{{likeList}}">
          <image src="{{item.wxAvatarUrl}}" class="like-gravatar" data-info="{{item}}"  bindtap="userShow"></image>
        </block>
      </view>
    </view>

  </view>

  <!-- è¯„è®ºåˆ—è¡¨ -->
  <view style="display:{{display}}" class="comment-container">
    <!-- å°æ ‡é¢˜ -->
    <view class="subTitle" id="relatedTitle">
      <view>è¯„è®ºäº¤æµ</view>
      <view class="comment-num">å·²æ”¶é›† {{commentCount}} æ¡è¯„è®º</view>
    </view>
    <view class="subTitle_line subTitle_line_comment"></view>

    <!-- åˆ—è¡¨ -->
    <block wx:key="id" wx:for="{{commentsList}}">
      <view class="comment">
        <view class="comment-user">
          <image src="{{item.avatarUrl}}" class="comment-gravatar"></image>
          <view class="comment-user-right">
            <!-- data-userid="{{item.userid}}" data-formId="{{item.formId}}" -->
            <!-- ç‚¹å‡»ç½‘åå¯å›å¤ -->
            <view bindtap="replay" data-id="{{item.id}}" data-name="{{item.nickName}}" data-userid="{{item.fatherUserID}}" data-commentdate="{{item.fatherReplyDate}}">{{item.nickName}}</view>
            <!-- ç‚¹å‡»æ—¶é—´å¯å›å¤ -->
            <view class="time" bindtap="replay" data-id="{{item.id}}" data-name="{{item.nickName}}" data-userid="{{item.fatherUserID}}" data-commentdate="{{item.fatherReplyDate}}">{{item.fatherReplyDate}}</view>
          </view>
        </view>
        <!-- data-formId="{{item.formId}}" -->
        <!-- ç‚¹å‡»å†…å®¹å¯å›å¤ -->
        <view class="comment-summary" bindtap="replay" data-id="{{item.id}}" data-name="{{item.nickName}}" data-userid="{{item.fatherUserID}}" data-commentdate="{{item.fatherReplyDate}}"> {{item.content}}</view>

        <!-- å­å›å¤-->
        <view wx:for="{{item.sonList}}" wx:key="itemid1" wx:for-index="idx" wx:for-item="item1">
          <view class="replay-user" bindtap="replay" data-id="{{item.id}}" data-name="{{item1.nickName}}" data-userid="{{item1.sonUserID}}" data-commentdate="{{item1.sonReplyDate}}">
            <text class="comment-username">{{item1.nickName}}</text>
            <text style="margin: 0 6rpx; color: #959595;">å›å¤</text>
            <text class="comment-username">{{item1.receiverNick}}</text> ï¼š{{item1.content}}
          </view>

        </view>
        <!-- å­å›å¤-->

      </view>
    </block>


    <view style="display:{{display}}">
      <view style="display:{{isLoading?'block':'none'}}">

        <template is="tempLoading" />
      </view>
      <view style="display:{{isLastPage?'block':'none'}}">
        <view class="no-more">- ğŸŒ¹ æ”¶é›†å°å¯çˆ±ä»¬çš„å›å¤ä¸­ ğŸŒ¹ -</view>
      </view>
    </view>
    <!-- æäº¤è¯„è®ºä¸ºnullå¼¹å‡ºå¯¹è¯æ¡†æ¨¡å— -->
    <modal title="{{dialog.title}}" hidden="{{dialog.hidden}}" no-cancel bindconfirm="confirm">{{dialog.content}}</modal>
  </view>
  <template is="modalView" data="{{...__modalView__}}" />

  <poster id="poster" hide-loading="{{false}}" preload="{{false}}" config="{{posterConfig}}" bind:success="onPosterSuccess" bind:fail="onPosterFail">
  </poster>
  <view class="ditail-copyright" style="display:{{display}}">
    <template is="tempCopyright" data="{{blog:blog,webSiteName:webSiteName}}" />
  </view>

  <template is="login-popup" data="{{show: isLoginPopup, userInfo: userInfo}}"></template>

  <!--è¯„è®ºåŒº-->
  <view style="display:{{enableComment?'block':'none'}}">
    <view class="menuBackground" catchtap="hiddenMenubox" style="display:{{menuBackgroup ? 'block' : 'none'}}"></view>
    <view style="display:{{display}}">

      <view class="comment-fixed">

        <form catchsubmit="formSubmit" report-submit="true">
          <view class="comment-respond">
            <input class="comment-input" maxlength="200" name="inputPostID" value="{{detail.id}}" style="display:none" />

            <view class="comment-box">

              <!-- è¿”å›é¦–é¡µ -->
              <image src="../../images/entry-home.png" class="comment_icon_home" catchtap="goHome"></image>

              <!-- è¯„è®ºè¾“å…¥æ¡†å’Œå‘é€æŒ‰é’® -->
              <view class="comment_input_box">
                <input class="comment-input" type='text' confirm-type="send" cursor-spacing="10" maxlength="100" name="inputComment" value="{{content}}" placeholder="{{placeholder}}" focus="{{focus}}" bindblur="onReplyBlur" bindfocus="onRepleyFocus" />
                <button class="comment-button touch-active" formType="submit">å‘é€</button>
              </view>
              <!-- æ›´å¤šæŒ‰é’® -->
              <!-- <image src="../../images/entry-more.png" class="comment_icon_more" catchtap="ShowHideMenu" mode=""></image> -->

            </view>



            <!--åŠŸèƒ½å›¾æ ‡-->
            <view class="menu-box {{isShow ? 'emoji-move-in' : 'emoji-move-out'}} {{isLoad ? 'no-emoji-move' : ''}}">
              <view class="iconList">
                <view class="iconLine">
                  <view style="width:25%; position: relative; float:left; text-align:center">
                    <view>
                      <image src="../../images/forwarding.png" class="img-menu"></image>
                    </view>
                    <view>
                      <text>è½¬å‘</text>
                    </view>
                    <button class="share-button share-button touch-active" open-type="share">
                    </button>
                  </view>
                  <view style="width:25%; float:left; text-align:center">
                    <view>
                      <image src="../../images/poster.png" catchtap="onCreatePoster" class="img-menu"></image>
                    </view>
                    <view>
                      <text>æµ·æŠ¥</text>
                    </view>
                  </view>
                  <!-- <view style="width:20%; float:left; text-align:center">
                    <view>
                      <image src="../../images/copy.png" class="img-menu" catchtap="gotowebpage"></image>
                    </view>
                    <view>
                      <text>é˜…è¯»åŸæ–‡</text>
                    </view>
                  </view> -->

                  <view style="width:25%; float:left; text-align:center">
                    <view>
                      <image src="../../images/{{likeImag}}" catchtap="clickLike" id="likebottom" class="img-menu"></image>
                    </view>
                    <view>
                      <text>é€å¿ƒ</text>
                    </view>
                  </view>
                  <view style="width:25%; float:left; ">
                    <view>
                      <image src="../../images/appreciation.png" catchtap="praise" class="img-menu"></image>
                    </view>
                    <view>
                      <text>å–œæ¬¢</text>
                    </view>

                  </view>
                </view>
              </view>
            </view>

          </view>
        </form>
      </view>

    </view>
  </view>

  <!-- ä½œè€…ä¿¡æ¯å±•ç¤ºå¼¹çª— -->
  <van-dialog use-slot title="å‘å¸ƒè€…åç‰‡" show="{{ showAuthorCard }}" show-cancel-button bind:confirm="copyWxId" confirmButtonText="å¤åˆ¶å¾®ä¿¡å·" style="text-align: center; ">
    <van-image src="{{authorInfo.wxAvatarUrl}}" width="400rpx" height="400rpx"  round
 />
    <van-cell-group style="text-align:left;">
      <van-cell title="èº«ä»½" value="{{authorInfo.role}}" />
      <van-cell title="å¾®ä¿¡æ˜µç§°" value="{{authorInfo.wxName}}" />
      
      <van-cell title="å¾®ä¿¡å·" value="{{authorInfo.wxId}}" label="å¤åˆ¶å¾®ä¿¡å·å¯æ·»åŠ å¥½å‹" />
      
    </van-cell-group>
  </van-dialog>

  <!-- ç”¨æˆ·ä¿¡æ¯å±•ç¤ºå¼¹çª— -->
  <van-dialog use-slot title="ç‚¹èµå°å¯çˆ±åç‰‡" show="{{showUserCard}}" show-cancel-button bind:confirm="copyWxId" confirmButtonText="å¤åˆ¶å¾®ä¿¡å·" data-userInfo="{{likerInfo.wxId}}" style="text-align: center; ">
    <van-image src="{{likerInfo.wxAvatarUrl}}" width="400rpx" height="400rpx"  round
 />
    <van-cell-group style="text-align:left;">
      <van-cell title="èº«ä»½" value="{{likerInfo.role}}" />
      <van-cell title="å¾®ä¿¡æ˜µç§°" value="{{likerInfo.wxName}}" />
      
      <van-cell title="å¾®ä¿¡å·" value="{{likerInfo.wxId}}" label="å¤åˆ¶å¾®ä¿¡å·å¯æ·»åŠ å¥½å‹" />
      
    </van-cell-group>
  </van-dialog>

  <!-- æ— æ³•è®¿é—®ç½‘ç»œæ—¶ [js:395]showerror: 'block'; -->
  <view class="showerror" style="display:{{showerror}}">
    <image src="../../images/cry80.png" style="height:100rpx;width:100rpx"></image>
    <!--  errMessage jsé¡µé¢dataä¸­æ²¡å®šä¹‰è¿™ä¸ªæ•°æ® -->
    <view class="errortext">{{errMessage}}</view>
  </view>

</view>